define("invest:page/uplan/main/uplan",["require","exports","module","common:widget/oui/lib/jquery/1.9.1/jquery","common:widget/oui/arale/tip/1.1.4/tip","common:widget/oui/common","common:widget/oui/protocol","common:widget/oui/widgets/widgets","common:widget/oui/components/components","common:widget/oui/arale/dialog/1.3.3/dialog","common:widget/oui/lib/handlebars/1.0.0/handlebars","invest:widget/static/js/invest-commom"],function(t,e,i){var n,o,a,c,m,u,l,s,d,r,g,p,w=t("common:widget/oui/lib/jquery/1.9.1/jquery"),b=(t("common:widget/oui/arale/tip/1.1.4/tip"),t("common:widget/oui/common"),t("common:widget/oui/protocol")),_=t("common:widget/oui/widgets/widgets"),f=(t("common:widget/oui/components/components"),t("common:widget/oui/arale/dialog/1.3.3/dialog"),t("common:widget/oui/lib/handlebars/1.0.0/handlebars"),_.GoTop(),t("invest:widget/static/js/invest-commom")),y={init:function(){n=w("#J_count_time_a"),o=w("#J_count_time_b"),a=w("#J_count_time_c"),c=w("#uplanAmount"),u=w("#uaIncome"),l=w("#ubIncome"),s=w("#ucIncome"),d=w("#uaIncomeV"),r=w("#ubIncomeV"),g=w("#ucIncomeV"),m=w("#uplanAmount-error-label"),p=w("#calcbt")},cal:function(){var t=w("#uplanAmount").val();if(f.validate(c,m)){var e={};e.amount=t,e.cashType="INVEST",w.ajax({async:!1,type:"GET",url:"/calculate!calculateUplanInterestABC.action",data:e,dataType:"json",success:function(t){if(0===t.status&&"okay"===t.message){var e=Number(t.data.interest.A).toFixed(2),i=Number(t.data.interest.B).toFixed(2),n=Number(t.data.interest.C).toFixed(2);y.calAnimate(),y.setIncomeV(e,i,n)}else alert(t.message),y.setIncomeV(0,0,0)},error:function(){alert(resp.message)}})}},calAnimate:function(){s.width(0).animate({width:"340px"}),l.width(0).animate({width:"240px"}),u.width(0).animate({width:"90px"})},setIncomeV:function(t,e,i){g.text(i+"元"),r.text(e+"元"),d.text(t+"元")},getList:function(){var t,e,i,n=!0,o=null;t="uplan-list-a",e=b.API.getPlans,n=!1,new _.List({name:t,api:e,filter:n,header:!0,pagination:!0,rendered:o,params:{category:"A"}}).init()._update({category:"A"}),w("#pg-uplan-main").length>0&&new _.Tab({name:"uplan",switched:function(t,e,i){return i?!0:("UB"==e&&new _.List({name:"uplan-list-b",api:b.API.getPlans,title:!0,pagination:!0,params:{category:"B"}}).init()._update({category:"B"}),"UC"==e&&new _.List({name:"uplan-list-c",api:b.API.getPlans,title:!0,pagination:!0,params:{category:"C"}}).init()._update({category:"C"}),!0)},clicked:function(){i=window.setTimeout(function(){window.clearTimeout(i),i=null},750)}}).init()},bindEvent:function(){c.on("keyup",function(){f.validate(c,m)}),p.unbind("click").bind("click",function(){y.cal()})},handle:function(){f.ticksownTime("#J_count_time_a"),f.ticksownTime("#J_count_time_b"),f.ticksownTime("#J_count_time_c"),y.cal(),y.getList()}};i.exports=y});